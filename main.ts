namespace SpriteKind {
    export const WallUpdateTrigger = SpriteKind.create()
}
namespace myTiles {
    //% blockIdentity=images._tile
    export const tile0 = img`
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
`
    //% blockIdentity=images._tile
    export const tile1 = img`
a a a a a a a a a a a a a a a a 
a a a a a a a a a a a a a a a a 
a a a a a a a a a a a a a a a a 
a a a a a a a a a a a a a a a a 
a a a a a a a a a a a a a a a a 
a a a a a a a a a a a a a a a a 
a a a a a a a a a a a a a a a a 
a a a a a a a a a a a a a a a a 
a a a a a a a a a a a a a a a a 
a a a a a a a a a a a a a a a a 
a a a a a a a a a a a a a a a a 
a a a a a a a a a a a a a a a a 
a a a a a a a a a a a a a a a a 
a a a a a a a a a a a a a a a a 
a a a a a a a a a a a a a a a a 
a a a a a a a a a a a a a a a a 
`
    //% blockIdentity=images._tile
    export const tile2 = img`
5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 
5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 
5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 
5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 
5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 
5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 
5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 
5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 
5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 
5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 
5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 
5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 
5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 
5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 
5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 
5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 
`
    //% blockIdentity=images._tile
    export const tile3 = img`
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 
4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 
4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 
`
    //% blockIdentity=images._tile
    export const tile5 = img`
9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 
9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 
9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 
9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 
9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 
9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 
9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 
9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 
9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 
9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 
9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 
9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 
9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 
9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 
9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 
9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 
`
    //% blockIdentity=images._tile
    export const tile6 = img`
7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 
7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 
7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 
7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 
7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 
7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 
7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 
7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 
7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 
7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 
7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 
7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 
7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 
7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 
7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 
7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 
`
    //% blockIdentity=images._tile
    export const tile7 = img`
4 4 4 a a a a a 4 4 4 a a a a a 
a 4 4 4 a a a a a 4 4 4 a a a a 
a a 4 4 4 a a a a a 4 4 4 a a a 
a a a 4 4 4 a a a a a 4 4 4 a a 
a a a a 4 4 4 a a a a a 4 4 4 a 
a a a a a 4 4 4 a a a a a 4 4 4 
4 a a a a a 4 4 4 a a a a a 4 4 
4 4 a a a a a 4 4 4 a a a a a 4 
4 4 4 a a a a a 4 4 4 a a a a a 
a 4 4 4 a a a a a 4 4 4 a a a a 
a a 4 4 4 a a a a a 4 4 4 a a a 
a a a 4 4 4 a a a a a 4 4 4 a a 
a a a a 4 4 4 a a a a a 4 4 4 a 
a a a a a 4 4 4 a a a a a 4 4 4 
4 a a a a a 4 4 4 a a a a a 4 4 
4 4 a a a a a 4 4 4 a a a a a 4 
`
    //% blockIdentity=images._tile
    export const tile8 = img`
4 4 4 a a a a a 4 4 4 a a a a a 
a 4 4 4 a a a a a 4 4 4 a a a a 
a a 4 4 4 a a a a a 4 4 4 a a a 
a a a 4 4 4 a a a a a 4 4 4 a a 
a a a a 4 4 4 a a a a a 4 4 4 a 
a a a a a 4 4 4 a a a a a 4 4 4 
a a a a a a a a a a a a a a a a 
a a a a a a a a a a a a a a a a 
a a a a a a a a a a a a a a a a 
a a a a a a a a a a a a a a a a 
a a a a a a a a a a a a a a a a 
a a a a a a a a a a a a a a a a 
a a a a a a a a a a a a a a a a 
a a a a a a a a a a a a a a a a 
a a a a a a a a a a a a a a a a 
a a a a a a a a a a a a a a a a 
`
    //% blockIdentity=images._tile
    export const tile9 = img`
a a a 4 4 4 4 4 a a a 4 4 4 4 4 
4 a a a 4 4 4 4 4 a a a 4 4 4 4 
4 4 a a a 4 4 4 4 4 a a a 4 4 4 
4 4 4 a a a 4 4 4 4 4 a a a 4 4 
4 4 4 4 a a a 4 4 4 4 4 a a a 4 
4 4 4 4 4 a a a 4 4 4 4 4 a a a 
a 4 4 4 4 4 a a a 4 4 4 4 4 a a 
a a 4 4 4 4 4 a a a 4 4 4 4 4 4 
a a a 4 4 4 4 4 a a a 4 4 4 4 4 
4 a a a 4 4 4 4 4 a a a 4 4 4 4 
4 4 a a a 4 4 4 4 4 a a a 4 4 4 
4 4 4 a a a 4 4 4 4 4 a a a 4 4 
4 4 4 4 a a a 4 4 4 4 4 a a a 4 
4 4 4 4 4 a a a 4 4 4 4 4 a a a 
a 4 4 4 4 4 a a a 4 4 4 4 4 a a 
a a 4 4 4 4 4 a a a 4 4 4 4 4 a 
`
    //% blockIdentity=images._tile
    export const tile10 = img`
a a a 4 4 4 4 4 a a a 4 4 4 4 4 
4 a a a 4 4 4 4 4 a a a 4 4 4 4 
4 4 a a a 4 4 4 4 4 a a a 4 4 4 
4 4 4 a a a 4 4 4 4 4 a a a 4 4 
4 4 4 4 a a a 4 4 4 4 4 a a a 4 
4 4 4 4 4 a a a 4 4 4 4 4 a a a 
a a a a a a a a a a a a a a a a 
a a a a a a a a a a a a a a a a 
a a a a a a a a a a a a a a a a 
a a a a a a a a a a a a a a a a 
a a a a a a a a a a a a a a a a 
a a a a a a a a a a a a a a a a 
a a a a a a a a a a a a a a a a 
a a a a a a a a a a a a a a a a 
a a a a a a a a a a a a a a a a 
a a a a a a a a a a a a a a a a 
`
}
function setTileWalls () {
    for (let value of tiles.getTilesByType(myTiles.tile1)) {
        tiles.setWallAt(value, true)
    }
    for (let value of tiles.getTilesByType(myTiles.tile8)) {
        tiles.setWallAt(value, true)
    }
    for (let value of tiles.getTilesByType(myTiles.tile10)) {
        tiles.setWallAt(value, true)
    }
}
sprites.onDestroyed(SpriteKind.WallUpdateTrigger, function (sprite) {
    scheduleWallUpdate()
})
controller.B.onEvent(ControllerButtonEvent.Pressed, function () {
    setActivePlayer((activePlayerIndex + 1) % 2)
})
function showScore () {
    pressText = "presses"
    if (buttonPresses == 1) {
        pressText = "press"
    }
    bestScores = blockSettings.readNumberArray("bestScores")
    if (bestScores[currentLevel] == 0 || buttonPresses < bestScores[currentLevel]) {
        bestScores[currentLevel] = buttonPresses
        blockSettings.writeNumberArray("bestScores", bestScores)
        bestScoreText = "new best!"
    } else {
        bestScoreText = "best" + " " + bestScores[currentLevel]
    }
    game.splash("Level " + (currentLevel + 1), "" + buttonPresses + " " + pressText + " - " + bestScoreText)
}
controller.A.onEvent(ControllerButtonEvent.Pressed, function () {
    if (activePlayerSprite.vy == 0) {
        activePlayerSprite.vy = -240
    }
})
function updateWalls (height: number, isWall: boolean) {
    for (let wallLocation of orangeWallLocations) {
        location = tiles.getTileLocation(tilemap.locationXY(wallLocation, tilemap.XY.column), tilemap.locationXY(wallLocation, tilemap.XY.row) - height)
        if (isWall) {
            tiles.setTileAt(location, myTiles.tile7)
            tiles.setWallAt(location, true)
        } else {
            tiles.setTileAt(location, myTiles.tile0)
            tiles.setWallAt(location, false)
        }
    }
    for (let reverseWallLocation of orangeReverseWallLocations) {
        location = tiles.getTileLocation(tilemap.locationXY(reverseWallLocation, tilemap.XY.column), tilemap.locationXY(reverseWallLocation, tilemap.XY.row) - (4 - height))
        if (isWall) {
            tiles.setTileAt(location, myTiles.tile0)
            tiles.setWallAt(location, false)
        } else {
            tiles.setTileAt(location, myTiles.tile9)
            tiles.setWallAt(location, true)
        }
    }
    for (let playerSprite of sprites.allOfKind(SpriteKind.Player)) {
        while (playerSprite.tileKindAt(TileDirection.Center, myTiles.tile7) || playerSprite.tileKindAt(TileDirection.Center, myTiles.tile9)) {
            playerSprite.y += 0 - tilemap.tileWidth()
        }
    }
}
function setActivePlayer (playerId: number) {
    controller.moveSprite(nate, 0, 0)
    controller.moveSprite(sam, 0, 0)
    activePlayerIndex = playerId
    if (activePlayerIndex == 0) {
        activePlayerSprite = nate
    } else {
        activePlayerSprite = sam
    }
    controller.moveSprite(activePlayerSprite, 80, 0)
    scene.cameraFollowSprite(activePlayerSprite)
}
function initPlayer (playerSprite: Sprite) {
    controller.moveSprite(playerSprite, 0, 0)
    playerSprite.ay = 800
}
function scheduleWallUpdate () {
    if (sprites.allOfKind(SpriteKind.WallUpdateTrigger).length == 0) {
        if (orangePressed && orangeWallExtensionHeight > 0) {
            updateWalls(orangeWallExtensionHeight, false)
            orangeWallExtensionHeight += -1
            trigger = sprites.create(image.create(0, 0), SpriteKind.WallUpdateTrigger)
            trigger.lifespan = 100
        } else if (!(orangePressed) && orangeWallExtensionHeight < 3) {
            orangeWallExtensionHeight += 1
            updateWalls(orangeWallExtensionHeight, true)
            trigger = sprites.create(image.create(0, 0), SpriteKind.WallUpdateTrigger)
            trigger.lifespan = 100
        }
    }
}
function initPlayers () {
    sam = sprites.create(img`
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . 9 9 9 9 . . . . . . 
. . . . . 9 9 9 9 9 9 . . . . . 
. . . . . 9 9 9 9 9 9 . . . . . 
. . . . . 9 9 9 9 9 9 . . . . . 
. . . . . . 9 9 9 9 . . . . . . 
. . . . . . . 9 9 . . . . . . . 
. . . . 9 9 9 9 9 9 9 9 . . . . 
. . . . 9 . 9 9 9 9 . 9 . . . . 
. . . 9 9 . 9 9 9 9 . 9 9 . . . 
. . . 9 9 . 9 9 9 9 . 9 9 . . . 
. . . . . . 9 9 9 9 . . . . . . 
. . . . . . 9 9 9 9 . . . . . . 
. . . . . 9 9 . . 9 9 . . . . . 
. . . . . 9 . . . . 9 . . . . . 
`, SpriteKind.Player)
    initPlayer(sam)
    tiles.placeOnRandomTile(sam, myTiles.tile5)
    tilemap.replaceAllTiles(myTiles.tile5, myTiles.tile0)
    nate = sprites.create(img`
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . 7 7 7 7 . . . . . . 
. . . . . 7 7 7 7 7 7 . . . . . 
. . . . . 7 7 7 7 7 7 . . . . . 
. . . . . 7 7 7 7 7 7 . . . . . 
. . . . . . 7 7 7 7 . . . . . . 
. . . . . . . 7 7 . . . . . . . 
. . . . 7 7 7 7 7 7 7 7 . . . . 
. . . . 7 . 7 7 7 7 . 7 . . . . 
. . . 7 7 . 7 7 7 7 . 7 7 . . . 
. . . 7 7 . 7 7 7 7 . 7 7 . . . 
. . . . . . 7 7 7 7 . . . . . . 
. . . . . . 7 7 7 7 . . . . . . 
. . . . . 7 7 . . 7 7 . . . . . 
. . . . . 7 . . . . 7 . . . . . 
`, SpriteKind.Player)
    initPlayer(nate)
    tiles.placeOnRandomTile(nate, myTiles.tile6)
    tilemap.replaceAllTiles(myTiles.tile6, myTiles.tile0)
    setActivePlayer(0)
}
function initLevel () {
    buttonPresses = 0
    if (currentLevel < levels.length) {
        tilemap.loadMap(tilemap.copyMap(levels[currentLevel]))
    } else {
        game.over(true)
    }
    setTileWalls()
    orangeWallLocations = tiles.getTilesByType(myTiles.tile8)
    orangeReverseWallLocations = tiles.getTilesByType(myTiles.tile10)
    orangeWallExtensionHeight = 0
    for (let index = 0; index < 3; index++) {
        orangeWallExtensionHeight += 1
        updateWalls(orangeWallExtensionHeight, true)
    }
}
let trigger: Sprite = null
let orangeWallExtensionHeight = 0
let orangePressed = false
let sam: Sprite = null
let nate: Sprite = null
let orangeReverseWallLocations: tiles.Location[] = []
let location: tiles.Location = null
let orangeWallLocations: tiles.Location[] = []
let activePlayerSprite: Sprite = null
let bestScoreText = ""
let buttonPresses = 0
let pressText = ""
let activePlayerIndex = 0
let bestScores: number[] = []
let levels: tilemap.WorldMap[] = []
let currentLevel = 0
currentLevel = 0
levels = [tilemap.createMap(tiles.createTilemap(
            hex`100008000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000060000000200000300000000000000000600010101010101010101040503000006000000000000000000000101010101070100000000000000000000000000000000000000000000000000`,
            img`
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
`,
            [myTiles.tile0,myTiles.tile1,myTiles.tile2,myTiles.tile3,myTiles.tile5,myTiles.tile6,myTiles.tile7,myTiles.tile8,myTiles.tile9,myTiles.tile10],
            TileScale.Sixteen
        )), tilemap.createMap(tiles.createTilemap(
            hex`18000900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000060000000000020000030000000000000000000000000000060000000001010101010101010600000000000000050000060000000101000000000000000600000000000000010101070101010100000000000000000600000003000004000000000000000000000000000000000701010101010101000000000000000000000000000000000000000000000000`,
            img`
. . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . 
`,
            [myTiles.tile0,myTiles.tile1,myTiles.tile2,myTiles.tile3,myTiles.tile5,myTiles.tile6,myTiles.tile7,myTiles.tile8,myTiles.tile9,myTiles.tile10],
            TileScale.Sixteen
        )), tilemap.createMap(tiles.createTilemap(
            hex`14000e0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002030000000000000000000000000000000000000101060000000000000000000000000000000000000006000000000000000000000000000000000000000600000000000000000000000000000000000000070000000000000000000000000000000000000000000000000000000000000504000000000001010101010600000001010101010100000000000000000000060000000000000000000000000003000000000006000000000000000000000000000101010101010700000000000000000000000000000000000000000000000000000000000000`,
            img`
. . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . 
`,
            [myTiles.tile0,myTiles.tile1,myTiles.tile2,myTiles.tile3,myTiles.tile5,myTiles.tile6,myTiles.tile7,myTiles.tile8,myTiles.tile9,myTiles.tile10],
            TileScale.Sixteen
        )), tilemap.createMap(tiles.createTilemap(
            hex`0f000800000000000000000000000000000000000000000000000000060000000000000000000000000000060000000000040500030000000000060000020300010101010101090101070101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000`,
            img`
. . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . 
`,
            [myTiles.tile0,myTiles.tile1,myTiles.tile2,myTiles.tile3,myTiles.tile5,myTiles.tile6,myTiles.tile7,myTiles.tile8,myTiles.tile9,myTiles.tile10],
            TileScale.Sixteen
        )), tilemap.createMap(tiles.createTilemap(
            hex`10000f00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000030200000000000000000000000000000101010100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000008010101010600000700000000000000080000000006000000000000050400000800000300060000000000000101010109010101010701010109000000000000000000000000000000000000000000000000000000000000000000`,
            img`
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
`,
            [myTiles.tile0,myTiles.tile1,myTiles.tile2,myTiles.tile3,myTiles.tile5,myTiles.tile6,myTiles.tile7,myTiles.tile8,myTiles.tile9,myTiles.tile10],
            TileScale.Sixteen
        )), tilemap.createMap(tiles.createTilemap(
            hex`18000e00000000000000000000000000000000000000000000000000000000000000000000000000000800000006000000000000000000000000000000000000000800000006000000000000000000000000000000000000000800030006000500000000000000000000000000000000000901010107010101010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000400000000000000000000000003000000000000000001010101010101010601010101010101010000000000000000000000000000000600000000000000000000000000000000000000000000000600000300000000020000000000000000000000000000000701010101010101010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000`,
            img`
. . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . 
`,
            [myTiles.tile0,myTiles.tile1,myTiles.tile2,myTiles.tile3,myTiles.tile5,myTiles.tile6,myTiles.tile7,myTiles.tile8,myTiles.tile9,myTiles.tile10],
            TileScale.Sixteen
        )), tilemap.createMap(tiles.createTilemap(
            hex`18001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000040000000600000000000000000000000005000000000001010101010600000000000000000001010101010000000000000000000600030000000000000000000000000000000000000000000701010101000000000900000000000000000000000203000000000000000000000000000000000000000000010101010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000`,
            img`
. . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . 
`,
            [myTiles.tile0,myTiles.tile1,myTiles.tile2,myTiles.tile3,myTiles.tile5,myTiles.tile6,myTiles.tile7,myTiles.tile8,myTiles.tile9,myTiles.tile10],
            TileScale.Sixteen
        ))]
if (!(blockSettings.exists("bestScores"))) {
    bestScores = []
    for (let value of levels) {
        bestScores.push(0)
    }
    blockSettings.writeNumberArray("bestScores", bestScores)
}
initLevel()
initPlayers()
game.onUpdate(function () {
    if (!(orangePressed) && (nate.tileKindAt(TileDirection.Center, myTiles.tile3) || sam.tileKindAt(TileDirection.Center, myTiles.tile3))) {
        orangePressed = true
        buttonPresses += 1
        scheduleWallUpdate()
    } else if (orangePressed && !(nate.tileKindAt(TileDirection.Center, myTiles.tile3) || sam.tileKindAt(TileDirection.Center, myTiles.tile3))) {
        orangePressed = false
        scheduleWallUpdate()
    } else if (tilemap.tileIs(tilemap.locationOfSprite(nate), myTiles.tile2) && tilemap.tileIs(tilemap.locationOfSprite(sam), myTiles.tile2)) {
        showScore()
        effects.confetti.startScreenEffect(500)
        tilemap.destorySpritesOfKind(SpriteKind.Player)
        currentLevel += 1
        initLevel()
        initPlayers()
    } else if (nate.bottom >= tilemap.tilemapRows() * tilemap.tileWidth() || sam.bottom >= tilemap.tilemapRows() * tilemap.tileWidth()) {
        game.splash("Ooops!", "Try again")
        tilemap.destorySpritesOfKind(SpriteKind.Player)
        initLevel()
        initPlayers()
    }
})
